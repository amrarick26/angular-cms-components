<div class="border-left h-100">
  <div #assetImageView class="bg-dark asset-detail_image p-2">
    <button
      class="btn btn-sm btn-outline-light float-left sticky-top shadow"
      (click)="closeClick.emit()"
    >
      Close
    </button>
    <a
      class="btn btn-sm btn-outline-light float-right sticky-top shadow"
      [href]="asset.Url"
      target="_blank"
    >
      View Fullsize
    </a>
    <figure>
      <img [src]="asset.Url + '-m'" [alt]="asset.Title" />
    </figure>
  </div>
  <nav class="navbar navbar-light">
    <span class="navbar-text mr-auto">
      {{ asset.FileName }}
    </span>
    <button *ngIf="hasChanges" class="btn btn-light" (click)="discardChanges()">
      Discard Changes
    </button>
    <button
      [disabled]="!hasChanges"
      class="btn btn-primary ml-2"
      (click)="saveClick.emit()"
    >
      Save Changes
    </button>
  </nav>
  <div class="p-3">
    <fieldset class="form-group">
      <label for="assetTitle">Title</label>
      <input
        type="text"
        id="assetTitle"
        class="form-control"
        [(ngModel)]="assetForm.Title"
        required
      />
    </fieldset>
    <fieldset class="form-group" *ngIf="tagOptions.length">
      <label for="assetTags"
        >Tagging ({{ assetForm.Tags ? assetForm.Tags.length : 0 }})</label
      >
      <div id="assetTags">
        <button
          *ngFor="let tag of tagOptions; index as i"
          class="btn btn-sm ml-1"
          [ngClass]="
            assetForm.Tags && assetForm.Tags.includes(tag)
              ? 'btn-primary'
              : 'btn-outline-dark'
          "
          (click)="handleTagToggle(tag)"
        >
          {{ tag }}
        </button>
      </div>
    </fieldset>
    <div
      class="alert alert-danger d-flex align-items-center justify-content-between mt-5"
    >
      <h5 class="text-danger m-0">Danger Zone</h5>
      <button class="btn btn-danger" (click)="confirmDelete()">
        Delete Asset
      </button>
    </div>
  </div>
</div>

<!-- CONFIRM DELETE MODAL -->
<ng-template #confirmModalTemplate>
  <cms-confirm-modal
    message="Are you sure you want to delete this asset?"
    (proceed)="handleDeleteAsset()"
    (cancel)="confirmDeleteModal.close()"
  >
  </cms-confirm-modal>
</ng-template>
